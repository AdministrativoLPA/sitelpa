<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="UTF-8">
    <title>Blog | LPA – Advocacia Empresarial</title>

    <link rel="stylesheet" href="./static/style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DM+Serif+Text:ital@0;1&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css">
    <link rel="icon" type="image/x-icon" href="./static/Imagens/logo.png">
    <script>
        !function (f, b, e, v, n, t, s) {
            if (f.fbq) return; n = f.fbq = function () {
                n.callMethod ?
                    n.callMethod.apply(n, arguments) : n.queue.push(arguments)
            };
            if (!f._fbq) f._fbq = n; n.push = n; n.loaded = !0; n.version = '2.0';
            n.queue = []; t = b.createElement(e); t.async = !0;
            t.src = v; s = b.getElementsByTagName(e)[0];
            s.parentNode.insertBefore(t, s)
        }(window, document, 'script',
            'https://connect.facebook.net/en_US/fbevents.js');
        fbq('init', '2033227177528343');
        fbq('track', 'PageView');
    </script>
    <noscript><img height="1" width="1" style="display:none"
            src="https://www.facebook.com/tr?id=2033227177528343&ev=PageView&noscript=1" /></noscript>
    <style>
        /* Estilos rápidos para a grade de posts */
        .blog-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-top: 30px;
        }

        .blog-card {
            background: #fff;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            transition: 0.3s;
        }

        .blog-card:hover {
            transform: translateY(-5px);
        }

        .blog-card img {
            width: 100%;
            height: 200px;
            object-fit: cover;
        }

        .blog-card-text {
            padding: 20px;
        }

        .blog-card h3 {
            margin-bottom: 10px;
            color: #333;
        }

        .blog-card p {
            font-size: 14px;
            color: #666;
            margin-bottom: 15px;
        }

        .btn-ler {
            color: #833921;
            font-weight: bold;
            text-decoration: none;
            text-transform: uppercase;
            font-size: 12px;
        }

        /* Estilos do Modal */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.8);
            overflow-y: auto;
        }

        .modal-content {
            background-color: #fff;
            margin: 5% auto;
            padding: 40px;
            border-radius: 8px;
            width: 80%;
            max-width: 800px;
            position: relative;
            line-height: 1.6;
        }

        .close-modal {
            position: absolute;
            right: 20px;
            top: 10px;
            font-size: 35px;
            font-weight: bold;
            cursor: pointer;
            color: #333;
        }

        #modal-body h2 {
            font-family: 'DM Serif Text', serif;
            margin-bottom: 20px;
            color: #833921;
        }

        #modal-body img {
            width: 100%;
            max-height: 400px;
            object-fit: cover;
            border-radius: 4px;
            margin-bottom: 20px;
        }

        .blog-card {
            cursor: pointer;
        }

        /* Indica que o card é clicável */
    </style>
</head>

<body>
    <section class="Sub-header">


        <nav>

            <a href="./index.html" class="logo-container">
                <img src="./static/Imagens/logo.png" class="logo-site logo-simbolo" alt="LPA Símbolo">
                <img src="./static/Imagens/logoLPA.png" class="logo-site logo-completa" alt="LPA Principal">
            </a>

            <div class="nav-links" id="navLinks">
                <i class="fas fa-times-circle" onclick="hideMenu()"></i>
                <ul>
                    <li><a href="./index.html">Home</a></li>
                    <li><a href="./About.html">Quem Somos</a></li>
                    <li><a href="./Servicos.html">Serviços</a></li>
                    <li><a href="./Blog.html">Blog</a></li>
                    <li><a href="./Contactus.html">Contato</a></li>
                    <li><a href="./Vagas.html">Vagas</a></li>
                </ul>
            </div>

            <i class="fas fa-bars" onclick="showMenu()"></i>

            <div class="header-icons">
                <a href="mailto:contato@lpaadv.com" title="Enviar E-mail">
                    <i class="fas fa-envelope"></i>
                </a>

                <a href="https://www.instagram.com/lpaadv" target="_blank" rel="noopener noreferrer" title="Instagram">
                    <i class="fab fa-instagram"></i>
                </a>

                <a href="https://www.linkedin.com/in/seuusuario" target="_blank" rel="noopener noreferrer"
                    title="LinkedIn">
                    <i class="fab fa-linkedin"></i>
                </a>
            </div>

        </nav>

        <h1 class="revelar">Blog e Noticias</h1>

    </section>

    <section class="blog-container-custom">
        <div class="blog-content">
            <div id="blog-loader" style="text-align: center; padding: 50px;">
                <i class="fas fa-spinner fa-spin"></i> Carregando artigos...
            </div>

            <div id="blog-grid" class="blog-grid"></div>
        </div>

        <div id="blogModal" class="modal">
            <div class="modal-content">
                <span class="close-modal" onclick="closeModal()">&times;</span>
                <div id="modal-body">
                </div>
            </div>
        </div>
    </section>

    <footer class="footer-lpa">
        <div class="footer-container">

            <div class="footer-col branding">
                <img src="./static/Imagens/logoLPA.png" class="footer-logo" alt="LPA Advocacia">
                <div class="footer-icons">
                    <a href="mailto:contato@lpaadv.com" title="E-mail"><i class="fas fa-envelope"></i></a>
                    <a href="https://instagram.com" target="_blank" title="Instagram"><i
                            class="fab fa-instagram"></i></a>
                    <a href="https://linkedin.com" target="_blank" title="LinkedIn"><i class="fab fa-linkedin"></i></a>
                </div>
            </div>

            <div class="footer-col links">
                <h4>Navegação</h4>
                <ul>
                    <li><a href="./index.html">Home</a></li>
                    <li><a href="./About.html">Quem Somos</a></li>
                    <li><a href="./Servicos.html">Serviços</a></li>
                    <li><a href="./Blog.html">Blog</a></li>
                    <li><a href="./Contactus.html">Contato</a></li>
                    <li><a href="./Vagas.html">Vagas</a></li>
                </ul>
            </div>

            <div class="footer-col contact-info">
                <h4>Onde Estamos</h4>
                <p><i class="fas fa-map-marker-alt"></i> Rua Jaceguai, 208, 12º andar, 1204<br>Bairro Prado, BH | MG</p>
                <p><i class="fas fa-phone-alt"></i> (31) 3657-5600</p>
                <p><i class="fab fa-whatsapp"></i> (31) 98338-7753</p>
                <p><i class="fas fa-envelope-open-text"></i> contato@lpaadv.com</p>
            </div>

            <div class="footer-col tagline">
                <p class="footer-slogan">Potencializamos<br>suas decisões</p>
            </div>

        </div>

        <div class="footer-bottom">
            <p>&copy; 2025 LPA - Advocacia de Negócios. Todos os direitos reservados.</p>
            <p class="dev-signature">
                <i class="fas fa-code"></i> Powered by
                <a href="https://github.com/CapGattsu" target="_blank" class="dev-link">João Scarmato</a> &
                <a href="https://github.com/GLKaiky" target="_blank" class="dev-link">Kaiky França</a>
            </p>
        </div>
    </footer>

    <script type="module">
        import { createClient } from 'https://cdn.skypack.dev/@sanity/client';

        const client = createClient({
            projectId: '6vs11ypf',
            dataset: 'production',
            useCdn: true,
            apiVersion: '2025-01-01',
        });

        // Variável global para armazenar os posts após o fetch
        let allPosts = [];

        async function fetchPosts() {
            const query = `*[_type == "post"] | order(publishedAt desc) {
            _id,
            title,
            "imageUrl": mainImage.asset->url,
            publishedAt,
            body
        }`;

            try {
                allPosts = await client.fetch(query);
                displayPosts(allPosts);
            } catch (err) {
                console.error("Erro no Sanity:", err);
                document.getElementById('blog-loader').innerText = "Erro ao carregar posts.";
            }
        }

        function displayPosts(posts) {
            const grid = document.getElementById('blog-grid');
            const loader = document.getElementById('blog-loader');
            if (loader) loader.style.display = 'none';

            grid.innerHTML = posts.map(post => {
                const resumo = post.body && post.body[0] ? post.body[0].children[0].text.substring(0, 100) + '...' : '';

                return `
                <div class="blog-card" onclick="openPost('${post._id}')">
                    <img src="${post.imageUrl || './static/Imagens/gray.jpg'}" alt="${post.title}">
                    <div class="blog-card-text">
                        <h3>${post.title}</h3>
                        <p>${resumo}</p>
                        <span class="btn-ler">Clique para ler mais</span>
                    </div>
                </div>
            `;
            }).join('');
        }

        // Função para abrir o modal
        window.openPost = function (id) {
            const post = allPosts.find(p => p._id === id);
            if (!post) return;

            const modal = document.getElementById('blogModal');
            const modalBody = document.getElementById('modal-body');

            // Transforma os blocos de texto do Sanity em HTML básico
            const contentHtml = post.body.map(block => {
                if (block._type === 'block') {
                    return `<p>${block.children.map(c => c.text).join('')}</p>`;
                }
                return '';
            }).join('<br>');

            modalBody.innerHTML = `
            <img src="${post.imageUrl || './static/Imagens/gray.jpg'}">
            <h2>${post.title}</h2>
            <small>Publicado em: ${new Date(post.publishedAt).toLocaleDateString('pt-BR')}</small>
            <hr style="margin: 20px 0; opacity: 0.2;">
            <div>${contentHtml}</div>
        `;

            modal.style.display = "block";
            document.body.style.overflow = "hidden"; // Trava o scroll do fundo
        }

        window.closeModal = function () {
            document.getElementById('blogModal').style.display = "none";
            document.body.style.overflow = "auto"; // Libera o scroll
        }

        // Fechar ao clicar fora da caixa branca
        window.onclick = function (event) {
            const modal = document.getElementById('blogModal');
            if (event.target == modal) closeModal();
        }

        fetchPosts();
    </script>

    <script>
        window._digisac = {
            id: "5bb09685-c8ce-4cce-b59f-14b623806a70",
            payload: {
                startOpen: true,
            }
        }
    </script>
    <script src="https://webchat.digisac.app/embedded.js"></script>


    <script src="./static/script.js"></script>
    <script>
        // Mantenha as funções de interface fora do módulo para evitar conflitos de escopo
        function showMenu() { document.getElementById("navLinks").style.right = "0"; }
        function hideMenu() { document.getElementById("navLinks").style.right = "-200px"; }
    </script>
</body>

</html>