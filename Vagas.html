<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="UTF-8">
    <title>Vagas | LPA – Advocacia Empresarial</title>

    <link rel="stylesheet" href="./static/style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DM+Serif+Text:ital@0;1&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css">
    <link rel="icon" type="image/x-icon" href="./static/Imagens/logo.png">


</head>

<body>
    <section class="Sub-header">
        <nav>
            <a href="./index.html" class="logo-container">
                <img src="./static/Imagens/logo.png" class="logo-site logo-simbolo" alt="LPA Símbolo">
                <img src="./static/Imagens/logoLPA.png" class="logo-site logo-completa" alt="LPA Principal">
            </a>
            <div class="nav-links" id="navLinks">
                <i class="fas fa-times-circle" onclick="hideMenu()"></i>
                <ul>
                    <li><a href="./index.html">Home</a></li>
                    <li><a href="./About.html">Quem Somos</a></li>
                    <li><a href="./Servicos.html">Serviços</a></li>
                    <li><a href="./Blog.html">Blog</a></li>
                    <li><a href="./Contactus.html">Contato</a></li>
                    <li><a href="./Vagas.html">Vagas</a></li>
                </ul>
            </div>

            <i class="fas fa-bars" onclick="showMenu()"></i>

            <div class="header-icons">
                <a href="mailto:contato@lpaadv.com" title="Enviar E-mail">
                    <i class="fas fa-envelope"></i>
                </a>

                <a href="https://www.instagram.com/lpaadv" target="_blank" rel="noopener noreferrer" title="Instagram">
                    <i class="fab fa-instagram"></i>
                </a>

                <a href="https://www.linkedin.com/in/seuusuario" target="_blank" rel="noopener noreferrer"
                    title="LinkedIn">
                    <i class="fab fa-linkedin"></i>
                </a>
            </div>
        </nav>
        <h1 class="revelar">Trabalhe Conosco</h1>
    </section>

    <section class="vagas-container">
        <p style="text-align: center;">Junte-se ao time da LPA Advocacia. Confira as oportunidades abaixo:</p>

        <div id="vagas-loader" style="text-align: center; padding: 40px;">
            <i class="fas fa-spinner fa-spin"></i> Buscando oportunidades...
        </div>

        <div id="vagas-grid" class="vagas-grid"></div>
    </section>

    <div id="vagaModal" class="modal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeVagaModal()">&times;</span>
            <div id="modal-vaga-body"></div>
            <hr style="margin: 25px 0; opacity: 0.2;">
            <p><strong>Interessado?</strong> Envie seu currículo para <b>vagas@lpaadv.com</b> informando o cargo no
                assunto.</p>
        </div>
    </div>

    <footer class="footer-lpa">
        <div class="footer-container">

            <div class="footer-col branding">
                <img src="./static/Imagens/logoLPA.png" class="footer-logo" alt="LPA Advocacia">
                <div class="footer-icons">
                    <a href="mailto:contato@lpaadv.com" title="E-mail"><i class="fas fa-envelope"></i></a>
                    <a href="https://instagram.com" target="_blank" title="Instagram"><i
                            class="fab fa-instagram"></i></a>
                    <a href="https://linkedin.com" target="_blank" title="LinkedIn"><i class="fab fa-linkedin"></i></a>
                </div>
            </div>

            <div class="footer-col links">
                <h4>Navegação</h4>
                <ul>
                    <li><a href="./index.html">Home</a></li>
                    <li><a href="./About.html">Quem Somos</a></li>
                    <li><a href="./Servicos.html">Serviços</a></li>
                    <li><a href="./Blog.html">Blog</a></li>
                    <li><a href="./Contactus.html">Contato</a></li>
                    <li><a href="./Vagas.html">Vagas</a></li>
                </ul>
            </div>

            <div class="footer-col contact-info">
                <h4>Onde Estamos</h4>
                <p><i class="fas fa-map-marker-alt"></i> Rua Jaceguai, 208, 12º andar, 1204<br>Bairro Prado, BH | MG</p>
                <p><i class="fas fa-phone-alt"></i> (31) 3657-5600</p>
                <p><i class="fab fa-whatsapp"></i> (31) 98338-7753</p>
                <p><i class="fas fa-envelope-open-text"></i> contato@lpaadv.com</p>
            </div>

            <div class="footer-col tagline">
                <p class="footer-slogan">Potencializamos<br>suas decisões</p>
            </div>

        </div>

        <div class="footer-bottom">
            <p>&copy; 2025 LPA - Advocacia de Negócios. Todos os direitos reservados.</p>
            <p class="dev-signature">
                <i class="fas fa-code"></i> Powered by
                <a href="https://github.com/CapGattsu" target="_blank" class="dev-link">João Scarmato</a> &
                <a href="https://github.com/GLKaiky" target="_blank" class="dev-link">Kaiky França</a>
            </p>
        </div>
    </footer>


    <script type="module">
        import { createClient } from 'https://cdn.skypack.dev/@sanity/client';

        const client = createClient({
            projectId: '6vs11ypf',
            dataset: 'production',
            useCdn: true,
            apiVersion: '2025-01-01',
        });

        let todasVagas = [];

        async function fetchVagas() {

            // Busca apenas documentos do tipo "vaga" onde "ativa" é verdadeiro
            const query = `*[_type == "vaga" && ativa == true] | order(_createdAt desc)`;

            try {
                todasVagas = await client.fetch(query);
                displayVagas(todasVagas);
            } catch (err) {
                console.error(err);
                document.getElementById('vagas-loader').innerText = "Erro ao carregar vagas.";
            }
        }

        function displayVagas(vagas) {
            const grid = document.getElementById('vagas-grid');
            const loader = document.getElementById('vagas-loader');
            loader.style.display = 'none';

            if (vagas.length === 0) {
                grid.innerHTML = "<p style='text-align:center;'>No momento não temos vagas abertas. Fique atento às nossas redes sociais!</p>";
                return;
            }

            grid.innerHTML = vagas.map(v => `
                <div class="vaga-card">
                    <div class="vaga-info">
                        <h3>${v.cargo}</h3>
                        <span><i class="fas fa-briefcase"></i> ${v.departamento}</span>
                    </div>
                    <button class="btn-vaga" onclick="openVaga('${v._id}')">Ver Detalhes</button>
                </div>
            `).join('');
        }

        window.openVaga = function (id) {
            const vaga = todasVagas.find(v => v._id === id);
            if (!vaga) return;

            const modal = document.getElementById('vagaModal');
            const body = document.getElementById('modal-vaga-body');

            const descricaoHtml = vaga.descricao.map(block => {
                return `<p>${block.children.map(c => c.text).join('')}</p>`;
            }).join('');

            body.innerHTML = `
                <span style="color: #833921; font-weight: bold; text-transform: uppercase;">${vaga.departamento}</span>
                <h2 style="font-family: 'DM Serif Text', serif; margin-top: 10px;">${vaga.cargo}</h2>
                <div style="margin-top: 20px;">${descricaoHtml}</div>
            `;

            modal.style.display = "block";
            document.body.style.overflow = "hidden";
        }

        window.closeVagaModal = function () {
            document.getElementById('vagaModal').style.display = "none";
            document.body.style.overflow = "auto";
        }

        window.onclick = function (event) {
            if (event.target == document.getElementById('vagaModal')) closeVagaModal();
        }

        fetchVagas();
    </script>
    <script src="./static/script.js"></script>
    <script>
        function showMenu() { document.getElementById("navLinks").style.right = "0"; }
        function hideMenu() { document.getElementById("navLinks").style.right = "-200px"; }
    </script>

    <script>
        window._digisac = {
            id: "5bb09685-c8ce-4cce-b59f-14b623806a70",
            payload: {
                startOpen: true,
            }
        }
    </script>
    <script src="https://webchat.digisac.app/embedded.js"></script>


</body>

</html>